% Copyright 2007 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\DeclareOptionBeamer{hideothersubsections}{\PassOptionsToPackage{hideothersubsections=#1}{beamerouterthemesidebar}}
\DeclareOptionBeamer{hideallsubsections}{\PassOptionsToPackage{hideallsubsections=#1}{beamerouterthemesidebar}}

\DeclareOptionBeamer{width}{\PassOptionsToPackage{width=#1}{beamerouterthemesidebar}}
\DeclareOptionBeamer{left}{\PassOptionsToPackage{left}{beamerouterthemesidebar}}
\DeclareOptionBeamer{right}{\PassOptionsToPackage{right}{beamerouterthemesidebar}}
\ProcessOptionsBeamer

\mode<presentation>

\useoutertheme{sidebar}
\useinnertheme{rectangles}

\usecolortheme{whale}
\usecolortheme{orchid}

\setbeamercolor*{frametitle}{parent=palette primary}

\setbeamerfont{block title}{size={}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% The Berkeley-themed Beamer Template: LMPS Lab Edition provides a seamless bridge between the captivating aesthetics of the LMPS Lab PowerPoint template and the flexibility and power of LaTeX Beamer. With this template, you can effortlessly convey your ideas, research findings, or academic presentations with a consistent and visually appealing color palette that resonates with the LMPS Lab's aesthetics. 
%
%A. Daby-Seesaram 2022
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%% Add LMPS image to the left bar %%%%%%%%%%%
\makeatletter
% \setbeamertemplate{background canvas}{\includegraphics[width=\beamer@sidebarwidth,height=\paperheight+1em]{Logos/LMS/LMS_LeftBar2}}
\setbeamertemplate{background canvas}{\includegraphics[width=\beamer@sidebarwidth,height=\paperheight+1em]{Logos/LMS/LMS_LeftBarNN}}

\setbeamertemplate{sidebar canvas left}{}
\newlength{\imagewidth}
\setlength{\imagewidth}{\paperwidth}
\addtolength{\imagewidth}{-\beamer@sidebarwidth}

\newlength{\sidebarwidth}
\setlength{\sidebarwidth}{\beamer@sidebarwidth}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setbeamercolor{palette sidebar secondary}{fg=white!850!black}
\setbeamercolor{section in sidebar shaded}{fg=accentcolor!65}
\setbeamercolor{subsection in sidebar shaded}{fg=accentcolor!65}






%%%% To have section highlighted when in subsection in left navigationbar


\makeatletter
\def\insertverticalnavigation#1{%
	\vbox{%
		\def\sectionentry##1##2##3##4##5{%
			\ifnum##5=\c@part%
			\def\insertsectionhead{##2}%
			\def\insertsectionheadnumber{##1}%
			\def\insertpartheadnumber{##5}%
			\hbox to #1{{%
					\usebeamerfont{section in sidebar}\usebeamercolor[fg]{section in sidebar}%
					\hyperlink{Navigation##3}{%
						\ifnum\c@section=##1%
						\ifnum\c@subsection=0\relax%
						{\usebeamertemplate{section in sidebar}}%
						\else%
						\ifx\beamer@nav@css\beamer@hidetext%
						{\usebeamertemplate{section in sidebar}}%
						\else%
						{\usebeamertemplate{section in sidebar}}% HERE
						\fi%
						\fi%
						\else
						{\usebeamertemplate{section in sidebar shaded}}%
						\fi}}}%
			\beamer@currentsubsection=0\relax\fi}%
		\def\slideentry##1##2##3##4##5##6{}%
		\def\beamer@subsectionentry##1##2##3##4##5{%
			\ifnum##1=\c@part%
			\def\insertpartheadnumber{##1}%
			\def\insertsectionheadnumber{##2}%
			\def\insertsubsectionheadnumber{##3}%
			\def\insertsubsectionhead{##5}%
			\beamer@tocifnothide{\ifnum\c@section=##2\ifnum\c@subsection=##3\beamer@nav@css\else\beamer@nav@oss\fi\else\beamer@nav@ooss\fi}%
			{\hbox{{%
						\usebeamerfont{subsection in sidebar}\usebeamercolor[fg]{subsection in sidebar}%
						\hyperlink{Navigation##4}{%
							\ifnum\c@section=##2%
							\ifnum\c@subsection=##3%
							\ifnum\c@subsubsection=0\relax%
							{\usebeamertemplate{subsection in sidebar}}%
							\else%
							{\usebeamertemplate{subsection in sidebar shaded}}%
							\fi%
							\else%
							{\usebeamertemplate{subsection in sidebar shaded}}%
							\fi%
							\else%
							{\usebeamertemplate{subsection in sidebar shaded}}%
							\fi}}}%
			}%
			\fi}%
		\def\beamer@subsubsectionentry##1##2##3##4##5##6{%
			\ifnum##1=\c@part%
			\def\insertpartheadnumber{##1}%
			\def\insertsectionheadnumber{##2}%
			\def\insertsubsectionheadnumber{##3}%
			\def\insertsubsubsectionheadnumber{##4}%
			\def\insertsubsubsectionhead{##6}%
			\beamer@tocifnothide{\ifnum\c@section=##2\ifnum\c@subsection=##3\ifnum\c@subsubsection=##4\beamer@nav@css\else\beamer@nav@oss\fi\else\beamer@nav@ooss\fi\else\beamer@nav@ooss\fi}%
			{\hbox{{%
						\usebeamerfont{subsubsection in sidebar}\usebeamercolor[fg]{subsubsection in sidebar}%
						\hyperlink{Navigation##5}{%
							\ifnum\c@section=##2%
							\ifnum\c@subsection=##3%
							\ifnum\c@subsubsection=##4%
							{\usebeamertemplate{subsubsection in sidebar}}%
							\else
							{\usebeamertemplate{subsubsection in sidebar shaded}}%
							\fi%
							\else%
							{\usebeamertemplate{subsubsection in sidebar shaded}}%
							\fi%
							\else%
							{\usebeamertemplate{subsubsection in sidebar shaded}}%
							\fi}}}%
			}%
			\fi}%
		%\beamer@currentsubsection=0\relax%
		\dohead%
	}%
}
\makeatother



















%%%%%%%%%%%%%%%%%%%%%% Logos %%%%%%%%%%%%%%%%%%%%%%
% Single logo
%\logo{\includegraphics[width=0.095\linewidth]{Logos/logo_LMPS_texte_blanc.pdf}} % LMPS

% Use logo of both ENS and CEA
\logo{%
	\hspace{0.7cm}\vspace{0.15cm}
	\makebox[1.85\paperwidth]{%
		\hfill%
		\hspace{2em} 
		\includegraphics[width=0.12\linewidth,keepaspectratio]{Logos/LMS/MEDISM_Logo2.pdf}%
		\hfill%
		%		\includegraphics[width=0.095\linewidth,keepaspectratio, trim = 0 1cm -1.5cm 0]{Logos/logo_cea_bleu_trait.eps}% cea bleu lmps
		\includegraphics[width=0.095\linewidth,keepaspectratio, trim = 0 1cm -1.5cm 0]{Logos/inr_logo_rouge_cmjn.pdf}% cea rouge cea
	}%
}
%\titlegraphic{\vspace*{-8.8cm}\hspace{-1.5cm}~\includegraphics[height=0.9cm]{Logos/Tutelles_colours.eps}\vspace*{10cm} % Tutelles bleu lmps
	% \titlegraphic{\vspace*{-8.9cm}\hspace{-1.5cm}~\includegraphics[height=0.9cm]{Logos/Tutelles_colours_new.eps}\vspace*{10cm} % tutelles couleurs
		% }
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	% Colours
	\setbeamercolor*{structure}{fg=BleuLMPS} % Change color in section pane and of different elements
	\setbeamercolor*{title}{fg=accentcolor, bg=}
	\setbeamercolor{frametitle}{bg=accentcolor!10} % Change color of frame title pane
	\setbeamercolor{logo}{bg=accentcolor,fg=accentcolor}  %controls the color of the logo area
	\setbeamercolor{framesubtitle}{fg=accentcolor} % Set frame title text color
	\setbeamercolor{frametitle}{fg=accentcolor} %Set frame subtitle text color
	\setbeamertemplate{itemize item}{\color{accentcolor!80}\tiny{$\blacksquare$}} % set items format
	\setbeamertemplate{itemize subitem}{\color{accentcolor!60}\tiny{$\blacktriangleright$}} % set subitems format
	\setbeamertemplate{itemize subsubitem}{\color{accentcolor!50}\tiny{$\bullet$}} % set subitems format
	
	
	%%%% Commands foot 
	\setbeamertemplate{page number in head/foot}[totalframenumber]
	\setbeamertemplate{navigation symbols}{\footnotesize\usebeamertemplate{page number in head/foot}}
	
	
	
	
	
	\mode
	<all>
